<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Various information about engineering and computing things. Just tid-bits from an enthusiast"><meta name=author content="Brian Sidebotham"><link href=https://www.valvers.com/open-software/arduino/esp32-mqtt-tutorial/ rel=canonical><link href=../../working-with-the-screen-command/ rel=prev><link href=../../aws/aws-lambda-getting-started/ rel=next><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.12"><title>ESP32 MQTT Tutorial - valvers.com</title><link rel=stylesheet href=../../../assets/stylesheets/main.0d440cfe.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../valvers-assets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#esp32-mqtt-tutorial class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=valvers.com class="md-header__button md-logo" aria-label=valvers.com data-md-component=logo> <img src=https://www.gravatar.com/avatar/8db3007cd3103d9ff42e90cc95dc7213 alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> valvers.com </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ESP32 MQTT Tutorial </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/valvers/valvers.website.src title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../denford-orac/ class=md-tabs__link> Denford orac </a> </li> <li class=md-tabs__item> <a href=../../../engineering/ class=md-tabs__link> Engineering </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Open software </a> </li> <li class=md-tabs__item> <a href=../../../random/ class=md-tabs__link> Random </a> </li> <li class=md-tabs__item> <a href=../../../v6manta/ class=md-tabs__link> V6manta </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=valvers.com class="md-nav__button md-logo" aria-label=valvers.com data-md-component=logo> <img src=https://www.gravatar.com/avatar/8db3007cd3103d9ff42e90cc95dc7213 alt=logo> </a> valvers.com </label> <div class=md-nav__source> <a href=https://github.com/valvers/valvers.website.src title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../denford-orac/ >Denford orac</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Denford orac </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../denford-orac/2009-04-06-my-denford-orac/ class=md-nav__link> 2009 04 06 my denford orac </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-02-17-uprated-spindle-motor/ class=md-nav__link> 2012 02 17 uprated spindle motor </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-03-22-gathering-some-information/ class=md-nav__link> 2012 03 22 gathering some information </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-09-27-750w-motor-sourced/ class=md-nav__link> 2012 09 27 750w motor sourced </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-10-01-motor-doesnt-fit/ class=md-nav__link> 2012 10 01 motor doesnt fit </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-10-10-drill-head-disassembly/ class=md-nav__link> 2012 10 10 drill head disassembly </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-10-13-more-quill-dismantling/ class=md-nav__link> 2012 10 13 more quill dismantling </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-10-17-drill-spindle-is-apart/ class=md-nav__link> 2012 10 17 drill spindle is apart </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-10-29-removing-electrical-cabinet/ class=md-nav__link> 2012 10 29 removing electrical cabinet </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-10-31-tested-the-drill-head-above-the-lathe/ class=md-nav__link> 2012 10 31 tested the drill head above the lathe </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2012-11-02-rebuild-of-an-orac/ class=md-nav__link> 2012 11 02 rebuild of an orac </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2013-03-13-new-motor-fitted/ class=md-nav__link> 2013 03 13 new motor fitted </a> </li> <li class=md-nav__item> <a href=../../../denford-orac/2020-06-28-denford-orac-machinekit-controller/ class=md-nav__link> Denford Orac Machinekit Controller </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../engineering/ >Engineering</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Engineering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../engineering/an-and-jic-fittings/ class=md-nav__link> AN and JIC Fittings </a> </li> <li class=md-nav__item> <a href=../../../engineering/bolt-dimensions/ class=md-nav__link> Bolt Dimensions </a> </li> <li class=md-nav__item> <a href=../../../engineering/linuxcnc/ class=md-nav__link> LinuxCNC </a> </li> <li class=md-nav__item> <a href=../../../engineering/making-a-cyr-wheel/ class=md-nav__link> Making a Cyr Wheel </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Open software</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Open software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../android-car-dash/ class=md-nav__link> Android car dash </a> </li> <li class=md-nav__item> <a href=../../logging-with-gcc/ class=md-nav__link> Logging with gcc </a> </li> <li class=md-nav__item> <a href=../../posix-shell-scripting/ class=md-nav__link> Posix Shell Scripting </a> </li> <li class=md-nav__item> <a href=../../rpi-cm4-linuxcnc/ class=md-nav__link> RPI CM4 Linux CNC </a> </li> <li class=md-nav__item> <a href=../../working-with-the-screen-command/ class=md-nav__link> Working with the Screen Command </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7 checked> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex=0> Arduino <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=true> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Arduino </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> ESP32 MQTT Tutorial <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> ESP32 MQTT Tutorial </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#install-arduino-ide class=md-nav__link> Install Arduino IDE </a> <nav class=md-nav aria-label="Install Arduino IDE"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-esp32-support class=md-nav__link> Install ESP32 Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#debug-output class=md-nav__link> Debug Output </a> </li> <li class=md-nav__item> <a href=#connecting-wifi class=md-nav__link> Connecting WiFi </a> </li> <li class=md-nav__item> <a href=#mqtt-library class=md-nav__link> MQTT Library </a> </li> <li class=md-nav__item> <a href=#amazon-iot class=md-nav__link> Amazon IoT </a> <nav class=md-nav aria-label="Amazon IoT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#security-policy class=md-nav__link> Security Policy </a> </li> <li class=md-nav__item> <a href=#iot-core-url class=md-nav__link> IoT Core URL </a> <nav class=md-nav aria-label="IoT Core URL"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-iam-access-key class=md-nav__link> Create IAM Access Key </a> </li> <li class=md-nav__item> <a href=#use-describe-endpoint class=md-nav__link> Use describe-endpoint </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#connect-to-aws-iot-to-publish-mqtt class=md-nav__link> Connect to AWS IoT to Publish MQTT </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex=0> Aws <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Aws </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../aws/aws-lambda-getting-started/ class=md-nav__link> AWS Lambda Getting Started </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_9> <label class=md-nav__link for=__nav_4_9 id=__nav_4_9_label tabindex=0> Gcc <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_9_label aria-expanded=false> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> Gcc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../gcc/weak-function-attributes/ class=md-nav__link> Weak Function Attributes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_10> <label class=md-nav__link for=__nav_4_10 id=__nav_4_10_label tabindex=0> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_10_label aria-expanded=false> <label class=md-nav__title for=__nav_4_10> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../python/pylab/ class=md-nav__link> Pylab </a> </li> <li class=md-nav__item> <a href=../../python/the-lethality-of-default-arguments-in-python/ class=md-nav__link> The Lethality of Default Arguments in Python </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11> <label class=md-nav__link for=__nav_4_11 id=__nav_4_11_label tabindex=0> Raspberry pi <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> Raspberry pi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-card/ class=md-nav__link> BMC Card Scripts </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-compiler/ class=md-nav__link> BMC Compiler </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-firmware/ class=md-nav__link> BMC Firmware </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-part-1/ class=md-nav__link> BMC Part 1 - Getting Started </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-part-2/ class=md-nav__link> BMC Part 2 - The C Runtime </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-part-3/ class=md-nav__link> BMC Part 3 - CMake Build System </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-part-4/ class=md-nav__link> BMC Part 4 - Interrupts </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c-part-5/ class=md-nav__link> Part 5 - Graphics (Basic) </a> </li> <li class=md-nav__item> <a href=../../raspberry-pi/bare-metal-programming-in-c/ class=md-nav__link> Raspberry-Pi Bare Metal Tutorial </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_12> <label class=md-nav__link for=__nav_4_12 id=__nav_4_12_label tabindex=0> Saltstack <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_12_label aria-expanded=false> <label class=md-nav__title for=__nav_4_12> <span class="md-nav__icon md-icon"></span> Saltstack </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../saltstack/building-a-centos8-salt-master/ class=md-nav__link> Building a CentOS8 Salt Master </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_13> <label class=md-nav__link for=__nav_4_13 id=__nav_4_13_label tabindex=0> Webstacks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_13_label aria-expanded=false> <label class=md-nav__title for=__nav_4_13> <span class="md-nav__icon md-icon"></span> Webstacks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../webstacks/using-reactjs-and-bulma/ class=md-nav__link> Using ReactJS and Bulma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../random/ >Random</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Random </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../random/mortgage/ class=md-nav__link> Mortgage </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../v6manta/ >V6manta</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> V6manta </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> 2003 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> 2003 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-07-28-/ class=md-nav__link> 2003 07 28 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-07-28-brought-a-1.8s-berlinetta/ class=md-nav__link> 2003 07 28 brought a 1.8s berlinetta </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-07-28-stage-rally-opel-manta/ class=md-nav__link> 2003 07 28 stage rally opel manta </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-08-12-/ class=md-nav__link> 2003 08 12 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-08-13-/ class=md-nav__link> 2003 08 13 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-08-23-/ class=md-nav__link> 2003 08 23 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-09-11-/ class=md-nav__link> 2003 09 11 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-09-28-/ class=md-nav__link> 2003 09 28 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-10-07-/ class=md-nav__link> 2003 10 07 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-10-09-/ class=md-nav__link> 2003 10 09 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-11-04-/ class=md-nav__link> 2003 11 04 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2003/2003-12-16-/ class=md-nav__link> 2003 12 16 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> 2004 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> 2004 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-01-06-/ class=md-nav__link> 2004 01 06 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-01-07-/ class=md-nav__link> 2004 01 07 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-01-26-/ class=md-nav__link> 2004 01 26 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-01-29-/ class=md-nav__link> 2004 01 29 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-02-09-/ class=md-nav__link> 2004 02 09 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-02-13-/ class=md-nav__link> 2004 02 13 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-02-19-/ class=md-nav__link> 2004 02 19 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-04-20-finally-got-around-to-the-manta/ class=md-nav__link> 2004 04 20 finally got around to the manta </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-06-17-/ class=md-nav__link> 2004 06 17 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-06-18-/ class=md-nav__link> 2004 06 18 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-06-21-/ class=md-nav__link> 2004 06 21 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-07-26-/ class=md-nav__link> 2004 07 26 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-08-09-/ class=md-nav__link> 2004 08 09 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-08-10-/ class=md-nav__link> 2004 08 10 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-09-03-/ class=md-nav__link> 2004 09 03 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-09-27-/ class=md-nav__link> 2004 09 27 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-07-/ class=md-nav__link> 2004 10 07 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-08-/ class=md-nav__link> 2004 10 08 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-11-/ class=md-nav__link> 2004 10 11 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-13-/ class=md-nav__link> 2004 10 13 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-15-/ class=md-nav__link> 2004 10 15 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-18-/ class=md-nav__link> 2004 10 18 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-21-/ class=md-nav__link> 2004 10 21 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-22-/ class=md-nav__link> 2004 10 22 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-10-29-/ class=md-nav__link> 2004 10 29 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-11-01-/ class=md-nav__link> 2004 11 01 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2004/2004-12-10-were-back/ class=md-nav__link> 2004 12 10 were back </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> 2005 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> 2005 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-05-16-/ class=md-nav__link> 2005 05 16 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-08-04-done-something/ class=md-nav__link> 2005 08 04 done something </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-08-08-/ class=md-nav__link> 2005 08 08 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-08-10-/ class=md-nav__link> 2005 08 10 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-08-25-/ class=md-nav__link> 2005 08 25 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-08-31-/ class=md-nav__link> 2005 08 31 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-09-05-/ class=md-nav__link> 2005 09 05 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-09-19-/ class=md-nav__link> 2005 09 19 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-09-22-/ class=md-nav__link> 2005 09 22 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-09-23-/ class=md-nav__link> 2005 09 23 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-11-01-/ class=md-nav__link> 2005 11 01 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2005/2005-11-03-/ class=md-nav__link> 2005 11 03 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> 2007 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> 2007 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2007/2007-10-20-/ class=md-nav__link> 2007 10 20 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2007/2007-10-20-perspex-windows/ class=md-nav__link> 2007 10 20 perspex windows </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2007/2007-11-13-getting-it-ready-to-paint.../ class=md-nav__link> 2007 11 13 getting it ready to paint... </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2007/2007-11-21-almost-started-painting/ class=md-nav__link> 2007 11 21 almost started painting </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2007/2007-11-28-underneath-is-complete/ class=md-nav__link> 2007 11 28 underneath is complete </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2007/2007-12-04-painting-the-inside-and-engine-bay/ class=md-nav__link> 2007 12 04 painting the inside and engine bay </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_6> <label class=md-nav__link for=__nav_6_6 id=__nav_6_6_label tabindex=0> 2008 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> 2008 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-01-14-painting-the-shell-orange/ class=md-nav__link> 2008 01 14 painting the shell orange </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-01-16-out-of-the-booth/ class=md-nav__link> 2008 01 16 out of the booth </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-01-23-rear-axle-trial-fitting/ class=md-nav__link> 2008 01 23 rear axle trial fitting </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-02-24-painted-the-nextel-and-checked-for-wheel-clearance/ class=md-nav__link> 2008 02 24 painted the nextel and checked for wheel clearance </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-03-15-front-suspension-build/ class=md-nav__link> 2008 03 15 front suspension build </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-03-19-suspension-bushes-are-always-wrong/ class=md-nav__link> 2008 03 19 suspension bushes are always wrong </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-03-22-diff-bearings-need-replacing/ class=md-nav__link> 2008 03 22 diff bearings need replacing </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-04-08-fitted-the-rear-windows-and-steering-column/ class=md-nav__link> 2008 04 08 fitted the rear windows and steering column </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-04-12-shimmed-up-the-diff%2C-and-fitted-the-clocks/ class=md-nav__link> 2008 04 12 shimmed up the diff, and fitted the clocks </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-04-16-rebuilt-the-gearbox-so-i-get-gear-selection/ class=md-nav__link> 2008 04 16 rebuilt the gearbox so i get gear selection </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-07-08-its-on-its-wheels-at-last/ class=md-nav__link> 2008 07 08 its on its wheels at last </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-09-02-rebuilt-oil-pump--started-headwork/ class=md-nav__link> 2008 09 02 rebuilt oil pump started headwork </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-09-04-some-more-headwork/ class=md-nav__link> 2008 09 04 some more headwork </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-09-25-even-more-headwork/ class=md-nav__link> 2008 09 25 even more headwork </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-11-09-engine--transmission-fitted/ class=md-nav__link> 2008 11 09 engine transmission fitted </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-11-16-engine--gearbox-mounted--steering-column-fitted/ class=md-nav__link> 2008 11 16 engine gearbox mounted steering column fitted </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2008/2008-12-14-stripping-the-x25xe-v6-bottom-end/ class=md-nav__link> 2008 12 14 stripping the x25xe v6 bottom end </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7 id=__nav_6_7_label tabindex=0> 2009 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_7_label aria-expanded=false> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> 2009 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2009/2009-06-24-making-the-dry-sump-pan/ class=md-nav__link> 2009 06 24 making the dry sump pan </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2009/2009-10-05-trialling-the-throttle-bodies--a-few-more-bits-painted/ class=md-nav__link> 2009 10 05 trialling the throttle bodies a few more bits painted </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2009/2009-12-18-flywheel-and-clutch/ class=md-nav__link> 2009 12 18 flywheel and clutch </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_8> <label class=md-nav__link for=__nav_6_8 id=__nav_6_8_label tabindex=0> 2010 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_8_label aria-expanded=false> <label class=md-nav__title for=__nav_6_8> <span class="md-nav__icon md-icon"></span> 2010 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-01-23-done-the-handbrake--sliders/ class=md-nav__link> 2010 01 23 done the handbrake sliders </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-01-27-started-building-the-v6-heads-up/ class=md-nav__link> 2010 01 27 started building the v6 heads up </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-01-30-picked-up-another-v6/ class=md-nav__link> 2010 01 30 picked up another v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-01-exhaust-manifolds/ class=md-nav__link> 2010 02 01 exhaust manifolds </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-02-starting-the-v6-build/ class=md-nav__link> 2010 02 02 starting the v6 build </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-03-cylinder-head-bolts-torque/ class=md-nav__link> 2010 02 03 cylinder head bolts torque </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-03-ordered-the-exhaust-manifold-flanges/ class=md-nav__link> 2010 02 03 ordered the exhaust manifold flanges </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-06-building-the-v6/ class=md-nav__link> 2010 02 06 building the v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-07-building-the-v6/ class=md-nav__link> 2010 02 07 building the v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-02-14-building-the-v6/ class=md-nav__link> 2010 02 14 building the v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-03-22-gearbox-sealed-and-release-bearing-fitted/ class=md-nav__link> 2010 03 22 gearbox sealed and release bearing fitted </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-04-03-started-on-the-manifolds/ class=md-nav__link> 2010 04 03 started on the manifolds </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-04-05-finished-a-manifold/ class=md-nav__link> 2010 04 05 finished a manifold </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-04-07-started-the-second-manifold/ class=md-nav__link> 2010 04 07 started the second manifold </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-04-11-need-a-todo-list/ class=md-nav__link> 2010 04 11 need a todo list </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-04-21-ticking-off-the-boxes/ class=md-nav__link> 2010 04 21 ticking off the boxes </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-04-26-nearly-finished-the-second-manifold/ class=md-nav__link> 2010 04 26 nearly finished the second manifold </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-05-09-got-the-car-rolling/ class=md-nav__link> 2010 05 09 got the car rolling </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-05-11-rolling-road-day/ class=md-nav__link> 2010 05 11 rolling road day </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-05-31-back-from-germany/ class=md-nav__link> 2010 05 31 back from germany </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-06-01-sumps-off/ class=md-nav__link> 2010 06 01 sumps off </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-06-06-done-most-of-the-bits-on-the-v6/ class=md-nav__link> 2010 06 06 done most of the bits on the v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-06-12-getting-ready-to-bolt-it-back-in/ class=md-nav__link> 2010 06 12 getting ready to bolt it back in </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-06-19-almost-ready-to-go-back-in/ class=md-nav__link> 2010 06 19 almost ready to go back in </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-09-22-lack-of-updates/ class=md-nav__link> 2010 09 22 lack of updates </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-09-26-few-little-bits/ class=md-nav__link> 2010 09 26 few little bits </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-10-09-v6-oil-problems..../ class=md-nav__link> 2010 10 09 v6 oil problems.... </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-10-12-starting-putting-the-engine-back-together/ class=md-nav__link> 2010 10 12 starting putting the engine back together </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-10-23-v6-is-broke/ class=md-nav__link> 2010 10 23 v6 is broke </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-10-24-stripping-the-v6/ class=md-nav__link> 2010 10 24 stripping the v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-10-25-v6-problem/ class=md-nav__link> 2010 10 25 v6 problem </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-11-03-picked-up-a-replacement-v6/ class=md-nav__link> 2010 11 03 picked up a replacement v6 </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2010/2010-12-12-been-busy-building/ class=md-nav__link> 2010 12 12 been busy building </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_9> <label class=md-nav__link for=__nav_6_9 id=__nav_6_9_label tabindex=0> 2011 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_9_label aria-expanded=false> <label class=md-nav__title for=__nav_6_9> <span class="md-nav__icon md-icon"></span> 2011 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-01-01-finally-driven-the-manta-again-today/ class=md-nav__link> 2011 01 01 finally driven the manta again today </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-03-13-fitting-some-new-seats/ class=md-nav__link> 2011 03 13 fitting some new seats </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-03-13-the-manta-got-mapped/ class=md-nav__link> 2011 03 13 the manta got mapped </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-03-25-went-to-brands-hatch/ class=md-nav__link> 2011 03 25 went to brands hatch </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-09-04-started-work-on-the-2011-rebuild/ class=md-nav__link> 2011 09 04 started work on the 2011 rebuild </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-09-10-built-some-more-of-the-frame/ class=md-nav__link> 2011 09 10 built some more of the frame </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-09-14-started-work-on-the-new-sump-pan/ class=md-nav__link> 2011 09 14 started work on the new sump pan </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-09-15-more-subframe-work/ class=md-nav__link> 2011 09 15 more subframe work </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-09-17-gearbox-back-together/ class=md-nav__link> 2011 09 17 gearbox back together </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-09-25-getting-ready-to-spray-the-engine-bay-again.../ class=md-nav__link> 2011 09 25 getting ready to spray the engine bay again... </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-10-16-moving-along-with-the-rebuild/ class=md-nav__link> 2011 10 16 moving along with the rebuild </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-10-18-painted-the-engine-bay/ class=md-nav__link> 2011 10 18 painted the engine bay </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2011/2011-11-15-dry-sump-work.../ class=md-nav__link> 2011 11 15 dry sump work... </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_10> <label class=md-nav__link for=__nav_6_10 id=__nav_6_10_label tabindex=0> 2012 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_10_label aria-expanded=false> <label class=md-nav__title for=__nav_6_10> <span class="md-nav__icon md-icon"></span> 2012 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-01-09-dry-sump-pan-is-welded/ class=md-nav__link> 2012 01 09 dry sump pan is welded </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-01-27-more-dry-sump-work/ class=md-nav__link> 2012 01 27 more dry sump work </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-02-21-engine-is-back-in.../ class=md-nav__link> 2012 02 21 engine is back in... </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-02-24-took-the-engine-back-out-again/ class=md-nav__link> 2012 02 24 took the engine back out again </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-02-27-engine-back-in-again/ class=md-nav__link> 2012 02 27 engine back in again </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-03-14-mostly-plumbed-back-in/ class=md-nav__link> 2012 03 14 mostly plumbed back in </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-04-04-started-her-up-again/ class=md-nav__link> 2012 04 04 started her up again </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-04-16-ready-for-a-test-drive/ class=md-nav__link> 2012 04 16 ready for a test drive </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-05-09-clutch-release-bearing-failure/ class=md-nav__link> 2012 05 09 clutch release bearing failure </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-05-17-stripping-the-t5-gearbox/ class=md-nav__link> 2012 05 17 stripping the t5 gearbox </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-10-13-rebuilt-the-gearbox/ class=md-nav__link> 2012 10 13 rebuilt the gearbox </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-11-11-finally-the-engines-back-in/ class=md-nav__link> 2012 11 11 finally the engines back in </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-11-14-nearly-back-together/ class=md-nav__link> 2012 11 14 nearly back together </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-11-25-the-finishing-touches/ class=md-nav__link> 2012 11 25 the finishing touches </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-11-28-finally-the-v6-manta-up-a-running-again/ class=md-nav__link> 2012 11 28 finally the v6 manta up a running again </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2012/2012-12-30-virtually-back-on-the-road/ class=md-nav__link> 2012 12 30 virtually back on the road </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_11> <label class=md-nav__link for=__nav_6_11 id=__nav_6_11_label tabindex=0> 2013 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_11_label aria-expanded=false> <label class=md-nav__title for=__nav_6_11> <span class="md-nav__icon md-icon"></span> 2013 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../v6manta/2013/2013-01-10-driven-the-manta-again/ class=md-nav__link> 2013 01 10 driven the manta again </a> </li> <li class=md-nav__item> <a href=../../../v6manta/2013/2013-01-15-had-a-great-blast-in-the-manta/ class=md-nav__link> 2013 01 15 had a great blast in the manta </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#install-arduino-ide class=md-nav__link> Install Arduino IDE </a> <nav class=md-nav aria-label="Install Arduino IDE"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-esp32-support class=md-nav__link> Install ESP32 Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#debug-output class=md-nav__link> Debug Output </a> </li> <li class=md-nav__item> <a href=#connecting-wifi class=md-nav__link> Connecting WiFi </a> </li> <li class=md-nav__item> <a href=#mqtt-library class=md-nav__link> MQTT Library </a> </li> <li class=md-nav__item> <a href=#amazon-iot class=md-nav__link> Amazon IoT </a> <nav class=md-nav aria-label="Amazon IoT"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#security-policy class=md-nav__link> Security Policy </a> </li> <li class=md-nav__item> <a href=#iot-core-url class=md-nav__link> IoT Core URL </a> <nav class=md-nav aria-label="IoT Core URL"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-iam-access-key class=md-nav__link> Create IAM Access Key </a> </li> <li class=md-nav__item> <a href=#use-describe-endpoint class=md-nav__link> Use describe-endpoint </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#connect-to-aws-iot-to-publish-mqtt class=md-nav__link> Connect to AWS IoT to Publish MQTT </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=esp32-mqtt-tutorial>ESP32 MQTT Tutorial<a class=headerlink href=#esp32-mqtt-tutorial title="Permanent link">&para;</a></h1> <p>This is a tutorial for getting an ESP32 set up as an Amazon IoT device using MQTT to communicate.</p> <h2 id=install-arduino-ide>Install Arduino IDE<a class=headerlink href=#install-arduino-ide title="Permanent link">&para;</a></h2> <p>No matter what your platform is, you'll need the Ardiuno IDE installed. It can be installed on many platforms including Linux, Windows and MAC.</p> <h3 id=install-esp32-support>Install ESP32 Support<a class=headerlink href=#install-esp32-support title="Permanent link">&para;</a></h3> <p>Once installed, plug the ESP32 board into a USB port and start the Arduino IDE.</p> <p>Select <code>File-&gt;Preferences</code> and then enter <code>https://dl.espressif.com/dl/package_esp32_index.json</code> in the <code>Additional Board Manager URLs</code> field.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/110-esp32-arduino-ide-set-preferences-to-enable-esp32.png></p> <p><strong>Click OK</strong></p> <p>Select <code>Tools-&gt;Board-&gt;Board Manager</code></p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/120-esp32-arduino-ide-select-board-manager.png></p> <p>Using the search feature, <strong>click Install</strong> for the ESP32 board support.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/130-esp32-arduino-ide-install-esp32-boards.png></p> <blockquote> <p><strong>NOTE:</strong> The ESP tools require the <code>pyserial</code> package to be installed in your default python installation. Depending on your system you can either use pip to install the pyserial package with something like <code>pip install --upgrade --user pyserial</code> or else you can get your distribution's packaged version of the python package with something like <code>sudo dnf install -y python3-pyserial</code> on Fedora for example.</p> </blockquote> <p>Select the board (depending on what board you have!). For me, I've been posted a board to work with.</p> <p>I've selected the standard <code>ESP Dev Module</code> as when I select <code>Tools-&gt;Get Board Info</code> the board comes back as unknown and so cannot be automatically detected as a supported Arduino board.</p> <p>When you've selected your board, there is already an empty sketch loaded. You can now simply <strong>click Upload</strong> in order to compile the sketch and upload the sketch to the ESP32 device.</p> <p>You should get a success message along the lines of <code>"Done uploading"</code> in the Arduino IDE.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/150-esp32-arduino-ide-done-uploading.png></p> <h2 id=debug-output>Debug Output<a class=headerlink href=#debug-output title="Permanent link">&para;</a></h2> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>If you're already familiar with Arduino and the IDE, etc. then you can safely skip this section.</p> </div> <p>To get started with the ESP (If you're not familiar with Sketches and Libraries) let's look at getting some debug output from the Sketch (Program) to prove to ourselves that the device is working and running our sketch.</p> <p>The default sketch looks like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kt>void</span><span class=w> </span><span class=nf>setup</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=c1>// put your setup code here, to run once:</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>}</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=kt>void</span><span class=w> </span><span class=nf>loop</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>  </span><span class=c1>// put your main code here, to run repeatedly:</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=p>}</span>
</code></pre></div> <p>Now, let's add some detail to make sure. Let's make use of a useful feature - that we have Serial communications available to us from within Arduino. From the <a href=https://www.arduino.cc/reference/en/language/functions/communication/serial/ >documentation</a> we can see the functions available for the Serial module.</p> <p>Our new code looks pretty straight forward:</p> <p><strong>110-esp-arduino-debug-output.ino</strong></p> <p><a href=https://github.com/valvers/valvers.website.src/tree/master/docs/src/esp32-mqtt-tutorial/110-esp32-arduino-debug-output>110-esp-arduino-debug-output.ino</a></p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kt>void</span><span class=w> </span><span class=nf>setup</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=c1>// put your setup code here, to run once:</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>115200</span><span class=p>);</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;Hello World!</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=p>}</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=kt>void</span><span class=w> </span><span class=nf>loop</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>  </span><span class=c1>// put your main code here, to run repeatedly:</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=p>}</span>
</code></pre></div> <p>In order to see the output from our program open the <code>Tools-&gt;Serial Monitor</code> - the COM port should be set to the same one the board is set to. The BAUD rate might have to be adjusted for your board. Make sure the BAUD rate is set to the same as your board communications so you get to see all of the output.</p> <p>Now, when we Upload the sketch to the ESP32, we can see the <code>Hello World!</code> output.</p> <p>We're done getting set up with Arduino and our board</p> <h2 id=connecting-wifi>Connecting WiFi<a class=headerlink href=#connecting-wifi title="Permanent link">&para;</a></h2> <p>First things first. In order to connect to an MQTT stream, we'll first need to be able to connect the ESP32 to a WiFi connection so we can connect to the internet.</p> <p>As part of the ESP32 support we installed earlier, there was a library installed which is available to the sketch called <code>WiFiClientSecure</code> which provides a secure web client.</p> <p>You can add this library to a sketch by selecting <code>Sketch-&gt;Include Library-&gt;WiFiClientSecure</code>. Information about this Arduino library can be found on GitHub: <a href=https://github.com/espressif/arduino-esp32/tree/master/libraries/WiFiClientSecure>https://github.com/espressif/arduino-esp32/tree/master/libraries/WiFiClientSecure</a></p> <p>The first thing we need to do is get connected to WiFi.</p> <p>Let's modify the Sketch so we connect to the WiFi. We'll use the <a href=https://github.com/espressif/arduino-esp32/blob/master/libraries/WiFiClientSecure/examples/WiFiClientSecure/WiFiClientSecure.ino>documented example</a> as a reference sketch. However, we don't need a root CA in place for the moment as we've not created our own certificate authority or have any CA we need to trust.</p> <p><strong>120-esp-arduino-wifi-connection.ino</strong></p> <p><a href=https://github.com/valvers/valvers.website.src/tree/master/docs/src/esp32-mqtt-tutorial/120-esp32-arduino-wifi-connection>120-esp-arduino-wifi-connection.ino</a> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;WiFiClientSecure.h&gt;</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>ssid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;your-ssid&quot;</span><span class=p>;</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>wifipassword</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;your-password&quot;</span><span class=p>;</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=n>WiFiClientSecure</span><span class=w> </span><span class=n>wifi</span><span class=p>;</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=kt>void</span><span class=w> </span><span class=nf>setup</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>  </span><span class=c1>// put your setup code here, to run once:</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>115200</span><span class=p>);</span>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;Connecting to SSID: &quot;</span><span class=p>);</span>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=n>ssid</span><span class=p>);</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>    </span><span class=n>WiFi</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=n>ssid</span><span class=p>,</span><span class=w> </span><span class=n>wifipassword</span><span class=p>);</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>    </span><span class=k>while</span><span class=p>(</span><span class=w> </span><span class=n>WiFi</span><span class=p>.</span><span class=n>status</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>WL_CONNECTED</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=w>        </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;.&quot;</span><span class=p>);</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>        </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a>
<a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;Connected to &quot;</span><span class=p>);</span>
<a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=n>ssid</span><span class=p>);</span>
<a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=p>}</span>
<a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>
<a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=kt>void</span><span class=w> </span><span class=nf>loop</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a><span class=w>  </span><span class=c1>// put your main code here, to run repeatedly:</span>
<a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;:&quot;</span><span class=p>);</span>
<a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a><span class=w>    </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
<a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a><span class=p>}</span>
</code></pre></div></p> <p>Go ahead and run that sketch, remembering to change the <code>ssid</code> and <code>wifipassword</code> variables to suitable settings for your network.</p> <p>When you run the sketch, you will see output in the Serial Monitor similar to the following:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>Connecting to SSID: your-ssid
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>.Connected to your-ssid
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>::::::::::
</code></pre></div> <p>From here we can connect to the internet and make web queries, etc. We'd do that with the <code>client</code> object. For now, we don't need to do anything else really, we just need to get on with looking at moving forward with MQTT.</p> <h2 id=mqtt-library>MQTT Library<a class=headerlink href=#mqtt-library title="Permanent link">&para;</a></h2> <p>We can install a library in the Arduino IDE for the MQTT client to get us MQTT support.</p> <p>In the Arduino IDE click <code>Tools-&gt;Manage Libraries...</code> and enter MQTT into the search box.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/170-esp32-arduino-ide-library-manager-mqtt.png></p> <p><strong>Click Install</strong> to install the library. Make sure you use the <code>Joël Gähwiler</code> MQTT library.</p> <p>Using a complete copy of a <a href=https://github.com/256dpi/arduino-mqtt/blob/master/examples/ESP32DevelopmentBoardSecure/ESP32DevelopmentBoardSecure.ino>sketch from the MQTT library</a> means that we can get connected to an MQTT client that is provided as a test ground.</p> <p><strong>130-esp-arduino-mqtt-example-shiftr.io.ino</strong></p> <p><a href=https://github.com/valvers/valvers.website.src/tree/master/docs/src/esp32-mqtt-tutorial/130-esp32-arduino-mqtt-example-shiftr.io.ino>130-esp-arduino-mqtt-example-shiftr.io.ino</a></p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>// This example uses an ESP32 Development Board</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=c1>// to connect to shiftr.io.</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=c1>//</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1>// You can check on your device after a successful</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=c1>// connection here: https://shiftr.io/try.</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=c1>//</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1>// by Joël Gähwiler</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=c1>// https://github.com/256dpi/arduino-mqtt</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;WiFiClientSecure.h&gt;</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;MQTT.h&gt;</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=n>ssid</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;mrbanks&quot;</span><span class=p>;</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=n>pass</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;mvepfgzw&quot;</span><span class=p>;</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=n>WiFiClientSecure</span><span class=w> </span><span class=n>net</span><span class=p>;</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=n>MQTTClient</span><span class=w> </span><span class=nf>client</span><span class=p>(</span><span class=mi>1024</span><span class=p>);</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=kt>unsigned</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>lastMillis</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=kt>void</span><span class=w> </span><span class=nf>connect</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=w>  </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;checking wifi...&quot;</span><span class=p>);</span>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=w>  </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>WiFi</span><span class=p>.</span><span class=n>status</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>WL_CONNECTED</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;.&quot;</span><span class=p>);</span>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=w>    </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a>
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=w>  </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>connecting...&quot;</span><span class=p>);</span>
<a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class=w>  </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>client</span><span class=p>.</span><span class=n>connect</span><span class=p>(</span><span class=s>&quot;bsidebotham&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;try&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;try&quot;</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;.&quot;</span><span class=p>);</span>
<a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=w>    </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
<a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a>
<a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a><span class=w>  </span><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>connected!&quot;</span><span class=p>);</span>
<a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a>
<a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a><span class=w>  </span><span class=n>client</span><span class=p>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s>&quot;/hello&quot;</span><span class=p>);</span>
<a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a><span class=w>  </span><span class=c1>// client.unsubscribe(&quot;/hello&quot;);</span>
<a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a><span class=p>}</span>
<a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a>
<a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a><span class=kt>void</span><span class=w> </span><span class=nf>messageReceived</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=o>&amp;</span><span class=n>topic</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=o>&amp;</span><span class=n>payload</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a><span class=w>  </span><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=s>&quot;incoming: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>topic</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&quot; - &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>payload</span><span class=p>);</span>
<a id=__codelineno-4-42 name=__codelineno-4-42 href=#__codelineno-4-42></a>
<a id=__codelineno-4-43 name=__codelineno-4-43 href=#__codelineno-4-43></a><span class=w>  </span><span class=c1>// Note: Do not use the client in the callback to publish, subscribe or</span>
<a id=__codelineno-4-44 name=__codelineno-4-44 href=#__codelineno-4-44></a><span class=w>  </span><span class=c1>// unsubscribe as it may cause deadlocks when other things arrive while</span>
<a id=__codelineno-4-45 name=__codelineno-4-45 href=#__codelineno-4-45></a><span class=w>  </span><span class=c1>// sending and receiving acknowledgments. Instead, change a global variable,</span>
<a id=__codelineno-4-46 name=__codelineno-4-46 href=#__codelineno-4-46></a><span class=w>  </span><span class=c1>// or push to a queue and handle it in the loop after calling `client.loop()`.</span>
<a id=__codelineno-4-47 name=__codelineno-4-47 href=#__codelineno-4-47></a><span class=p>}</span>
<a id=__codelineno-4-48 name=__codelineno-4-48 href=#__codelineno-4-48></a>
<a id=__codelineno-4-49 name=__codelineno-4-49 href=#__codelineno-4-49></a><span class=kt>void</span><span class=w> </span><span class=nf>setup</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-50 name=__codelineno-4-50 href=#__codelineno-4-50></a><span class=w>  </span><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>115200</span><span class=p>);</span>
<a id=__codelineno-4-51 name=__codelineno-4-51 href=#__codelineno-4-51></a><span class=w>  </span><span class=n>WiFi</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=n>ssid</span><span class=p>,</span><span class=w> </span><span class=n>pass</span><span class=p>);</span>
<a id=__codelineno-4-52 name=__codelineno-4-52 href=#__codelineno-4-52></a>
<a id=__codelineno-4-53 name=__codelineno-4-53 href=#__codelineno-4-53></a><span class=w>  </span><span class=c1>// Note: Local domain names (e.g. &quot;Computer.local&quot; on OSX) are not supported</span>
<a id=__codelineno-4-54 name=__codelineno-4-54 href=#__codelineno-4-54></a><span class=w>  </span><span class=c1>// by Arduino. You need to set the IP address directly.</span>
<a id=__codelineno-4-55 name=__codelineno-4-55 href=#__codelineno-4-55></a><span class=w>  </span><span class=c1>//</span>
<a id=__codelineno-4-56 name=__codelineno-4-56 href=#__codelineno-4-56></a><span class=w>  </span><span class=c1>// MQTT brokers usually use port 8883 for secure connections.</span>
<a id=__codelineno-4-57 name=__codelineno-4-57 href=#__codelineno-4-57></a><span class=w>  </span><span class=n>client</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=s>&quot;broker.shiftr.io&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>8883</span><span class=p>,</span><span class=w> </span><span class=n>net</span><span class=p>);</span>
<a id=__codelineno-4-58 name=__codelineno-4-58 href=#__codelineno-4-58></a><span class=w>  </span><span class=n>client</span><span class=p>.</span><span class=n>onMessage</span><span class=p>(</span><span class=n>messageReceived</span><span class=p>);</span>
<a id=__codelineno-4-59 name=__codelineno-4-59 href=#__codelineno-4-59></a>
<a id=__codelineno-4-60 name=__codelineno-4-60 href=#__codelineno-4-60></a><span class=w>  </span><span class=n>connect</span><span class=p>();</span>
<a id=__codelineno-4-61 name=__codelineno-4-61 href=#__codelineno-4-61></a><span class=p>}</span>
<a id=__codelineno-4-62 name=__codelineno-4-62 href=#__codelineno-4-62></a>
<a id=__codelineno-4-63 name=__codelineno-4-63 href=#__codelineno-4-63></a><span class=kt>void</span><span class=w> </span><span class=nf>loop</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-64 name=__codelineno-4-64 href=#__codelineno-4-64></a><span class=w>  </span><span class=n>client</span><span class=p>.</span><span class=n>loop</span><span class=p>();</span>
<a id=__codelineno-4-65 name=__codelineno-4-65 href=#__codelineno-4-65></a><span class=w>  </span><span class=n>delay</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span><span class=w>  </span><span class=c1>// &lt;- fixes some issues with WiFi stability</span>
<a id=__codelineno-4-66 name=__codelineno-4-66 href=#__codelineno-4-66></a>
<a id=__codelineno-4-67 name=__codelineno-4-67 href=#__codelineno-4-67></a><span class=w>  </span><span class=c1>// publish a message roughly every second.</span>
<a id=__codelineno-4-68 name=__codelineno-4-68 href=#__codelineno-4-68></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>millis</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>lastMillis</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-69 name=__codelineno-4-69 href=#__codelineno-4-69></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>client</span><span class=p>.</span><span class=n>connected</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-70 name=__codelineno-4-70 href=#__codelineno-4-70></a><span class=w>      </span><span class=n>Serial</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&quot;lastError: &quot;</span><span class=p>);</span>
<a id=__codelineno-4-71 name=__codelineno-4-71 href=#__codelineno-4-71></a><span class=w>      </span><span class=n>Serial</span><span class=p>.</span><span class=n>println</span><span class=p>(</span><span class=n>client</span><span class=p>.</span><span class=n>lastError</span><span class=p>());</span>
<a id=__codelineno-4-72 name=__codelineno-4-72 href=#__codelineno-4-72></a><span class=w>      </span><span class=n>connect</span><span class=p>();</span>
<a id=__codelineno-4-73 name=__codelineno-4-73 href=#__codelineno-4-73></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-4-74 name=__codelineno-4-74 href=#__codelineno-4-74></a><span class=w>    </span><span class=n>lastMillis</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>millis</span><span class=p>();</span>
<a id=__codelineno-4-75 name=__codelineno-4-75 href=#__codelineno-4-75></a><span class=w>    </span><span class=n>client</span><span class=p>.</span><span class=n>publish</span><span class=p>(</span><span class=s>&quot;/hello&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;world&quot;</span><span class=p>);</span>
<a id=__codelineno-4-76 name=__codelineno-4-76 href=#__codelineno-4-76></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-4-77 name=__codelineno-4-77 href=#__codelineno-4-77></a><span class=p>}</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>I created a <a href=https://github.com/256dpi/arduino-mqtt/issues/197>GitHub issue</a> for the fact that the example ESP32 code didn't work out-of-the box on an ESP32 development board</p> </div> <p>The above code is changed slightly from the actual example code. The buffer size for the MQTT client <em>must</em> be increased to get past the first message received from the shiftr.io MQTT server. After that first message, we receive the correct <code>/hello world</code> topic and message from the server which we subscribe to. For more information about MQTT, you can see the <a href=http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html>MQTT 3.1.1 documentation</a>.</p> <h2 id=amazon-iot>Amazon IoT<a class=headerlink href=#amazon-iot title="Permanent link">&para;</a></h2> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>In this section, we'll make heavy use of the <a href=https://docs.aws.amazon.com/iot/latest/developerguide/iot-gs.html>AWS documentation</a></p> </div> <p>The AWS IoT service allows us to create secure MQTT endpoints for our own Internet-of-Things devices. Let's have a look at how to get our now-MQTT-enabled ESP32 connecting to our own AWS IoT service.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/200-esp32-aws-iot-getting-started.png></p> <p>The first task is to create a Thing - that is, a unique device that will be able to connect to the service that we create later.</p> <p><strong>Click Manage</strong></p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/210-esp32-aws-iot-register-a-thing.png></p> <p><strong>Click Register a thing</strong></p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/220-esp32-aws-iot-create-a-single-thing.png></p> <p>Name your thing something that is pertinent to this tutorial. I've gone for <code>ESP32Example</code> so that's what'll be in use throughout the rest of this tutorial.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/230-esp32-aws-iot-create-a-single-thing-name.png></p> <p><strong>Click Next</strong> after you've inserted a name. There's no need to create a group or anything at this point.</p> <p>Certificates. This is always a fun subject. You can end up tying yourself in knots with certificates. For the tutorial, I say - use the one-click certificate creation. That's what I'll do here for this tutorial, but generally for business I'd be using a CSR or (more likely) my own CA for IoT devices. Using your own CA puts you in a much better place.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/240-esp32-aws-iot-create-a-single-thing-certificate.png></p> <p><strong>Click One-click certificate creation "Create certificate"</strong></p> <p>Pay attention to the next page - you only get one chance to download the public and private keys. Once you move away from the next AWS page you will not be able to download them again. Make sure you keep the certificate and private key out of other people's reach.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/250-esp32-aws-iot-create-a-single-thing-certificate-download.png></p> <p><strong>Download all three certificates</strong></p> <p>Go ahead and download the certificates and keys that have been created for your device.</p> <p>You'll also notice that there is a link to the root CA for AWS IoT. <strong>Right Click</strong> this link and open it in a new tab and contains various options for the root CA certificate that we need to trust in order to gain secure connectivity to AWS IoT services.</p> <p>Although RSA is getting a slightly bad wrap these days, AWS have a 2048 bit RSA key certificate listed along with some <a href=http://www-irm.mathematik.hu-berlin.de/~sulanke/diffgeo/euklid/EuCurvesv3.pdf>Euclidean Curve</a> (ECC) key certificates. ECC keys require considerable more processing effort than RSA - so stick with the RSA key certificates where you can.</p> <p>For this tutorial, I am going to get the <a href=https://www.amazontrust.com/repository/AmazonRootCA1.pem>2048 bit RSA AWS Root CA</a>.</p> <p>Download the AWS Root CA and keep it alongside the other certificates.</p> <p>In the original certificate page, <strong>Click Activate</strong> on the certificate, so that the box now changes to Deactivate. The certificates are now active.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/260-esp32-aws-iot-create-a-single-thing-certificate-activated.png></p> <p><strong>Click Done</strong>, because we cant' yet <code>Attach a policy</code> as we've not created any IoT policies yet.</p> <h3 id=security-policy>Security Policy<a class=headerlink href=#security-policy title="Permanent link">&para;</a></h3> <p>From the main screen, in the left-hand navigation pane <strong>Click Secure</strong> and then <strong>Policies</strong> from the Secure sub-menu to start creating a new security policy which we will attach to the certificate we've just created.</p> <p>Together the policy and the certificate will give the new IoT thing permissions to do something (Usually subscribe to and publish to MQTT channels).</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/270-esp32-aws-iot-secure-create-a-policy.png></p> <p><strong>Click Create a policy</strong> which will be our first policy.</p> <p>Give the policy a meaningful name. For the purposes of this tutorial I'm going to call this policy <code>ESP32ExamplePermissions</code> which is a bit poor as it doesn't describe what the policy does. Generally a policy should hint at what it provides rather than be device-specific. But, as we're just working through getting something up and running that we can tweak with later, this will be fine.</p> <p>Specify the Action as <code>iot:Connect</code> and then leave the ARN set automatically. The <code>ARN</code> has a set format which includes a region and your account number.</p> <p>Set the Effect to <code>Allow</code>.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/285-esp32-aws-iot-secure-iot-connect-statement.png></p> <p>Now - move to the advanced mode (<strong>Click Advanced...</strong>) - this allows us to paste in the JSON source for this policy. The reason for doing the first one is to</p> <p>We will adjust the ARN to be dynamic so it's not tied to one thing. This saves us tying the policy to a device-specific ARN. Replace the <region> and <account> settings in the JSON below to the automatically-generated ones from the previous step so this policy is good for your account.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>&quot;Version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2012-10-17&quot;</span><span class=p>,</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nt>&quot;Statement&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>      </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>      </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;iot:Connect&quot;</span><span class=p>,</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>      </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:iot:&lt;region&gt;:&lt;account&gt;:client/${iot:Connection.Thing.ThingName}&quot;</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>      </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>      </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;iot:Publish&quot;</span><span class=p>,</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>      </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:iot:&lt;region&gt;:&lt;account&gt;:topic/$aws/things/${iot:Connection.Thing.ThingName}/shadow/update&quot;</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>      </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>      </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;iot:Subscribe&quot;</span><span class=p>,</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>      </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:iot:&lt;region&gt;:&lt;account&gt;:topic/$aws/things/${iot:Connection.Thing.ThingName}/shadow/update/accepted&quot;</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>      </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>      </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;iot:Receive&quot;</span><span class=p>,</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>      </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:iot:&lt;region&gt;:&lt;account&gt;:topic/$aws/things/${iot:Connection.Thing.ThingName}/shadow/update/accepted&quot;</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>      </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>      </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;iot:Subscribe&quot;</span><span class=p>,</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>      </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:iot:&lt;region&gt;:&lt;account&gt;:topic/$aws/things/${iot:Connection.Thing.ThingName}/shadow/update/rejected&quot;</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=w>      </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=w>      </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;iot:Receive&quot;</span><span class=p>,</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a><span class=w>      </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:iot:&lt;region&gt;:&lt;account&gt;:topic/$aws/things/${iot:Connection.Thing.ThingName}/shadow/update/rejected&quot;</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a><span class=w>  </span><span class=p>]</span>
<a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a><span class=p>}</span>
</code></pre></div> <p>We now have to attach the Policy to the Certificate we created earlier for the IoT Thing.</p> <p><strong>Click Secure-&gt;Certificates</strong> from the left hand navigation pane. We can see the certificate that we created a few steps ago for our first IoT Thing. Hover over it and click the checkbox on the certificate. From the <code>Actions</code> menu that appears, select <code>Attach Policy</code></p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/300-esp32-aws-iot-secure-iot-attach-policy-to-certificate.png></p> <p>From the dialog that opens, select the new policy that we just created, <code>ESP32ExamplePermissions</code>:</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/310-esp32-aws-iot-secure-iot-attach-policy-to-certificate-attach.png></p> <p><strong>Click Attach</strong> and we get a confirmation toast that the policy has been attached successfully.</p> <p>Now that the security policy is attached to the certificate, we need to attach the certificate to the Thing.</p> <p>From the Actions menu for the certificate which should still be available (If it isn't, select the certificate again as above) select <code>Attach thing</code></p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/300-esp32-aws-iot-secure-iot-attach-policy-to-certificate.png></p> <p>From the dialog that opens, select the Thing that we created earlier.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/320-esp32-aws-iot-secure-iot-attach-certificate-to-thing.png></p> <p><strong>Click Attach</strong> and we get another toast message saying that the certificate was attached to the Thing successfully.</p> <h3 id=iot-core-url>IoT Core URL<a class=headerlink href=#iot-core-url title="Permanent link">&para;</a></h3> <p>From the <a href=https://docs.aws.amazon.com/general/latest/gr/iot-core.html>AWS Documentation of IoT Core</a> we can see that to find the URL and port number that MQTT should connect to for our new thing, we should use the <code>describe-endpoint</code> command. This command is run against your AWS account by using the AWS CLI tool and an AWS Access Key (With sufficient permissions to <code>describe-endpoint</code>)</p> <h4 id=create-iam-access-key>Create IAM Access Key<a class=headerlink href=#create-iam-access-key title="Permanent link">&para;</a></h4> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can skip this section if you've already got an AWS Access Key and the AWS CLI tools.</p> </div> <p>We need to create an Access Key which will allow an IAM user to perform programatic tasks on our AWS account. If you're still using the root account credentials to do things - STOP! Change to make yourself an IAM administrator role and don't bother logging in as the root account any longer.</p> <p>In the AWS Console select the IAM service and click Users, following by the User which you currently use within the AWS Console. From the user summary page, click <code>Security Credentials</code> and then <code>Create access key</code>.</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/330-esp32-aws-iot-iam-user-access-key-create.png></p> <p>You need to click <code>Show</code> to be able to see the <code>Secret access key</code> and you need to put that somewhere safe. I recommend some secure password vault like Lastpass or else Hashicorp's Vault.</p> <p>Close when you've copied out the access key id and the Secret access key.</p> <p>We need the aws CLI tools. I'm working on Fedora, so I do <code>dnf search aws</code> to find the package which it turns out is <code>awscli</code> and so I can install the package with <code>sudo dnf install awscli</code>.</p> <p>In order to use the AWS CLI tools, you have to inform the AWS CLI tool about the access key that enables it to access your account. This is easiest done by using the <code>configure</code> command:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>[brian@brian-2920x ~]$ aws configure
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>AWS Access Key ID [None]: AKIA2J57***********F
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>AWS Secret Access Key [None]: I**************************************E
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>Default region name [None]: eu-west-2
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>Default output format [None]:
</code></pre></div> <p>Make sure you paste in the secrets here. On Linux this stores your AWS secrets in plain text in a file in your home directory <code>~/.aws/credentials</code> - which is why these days I always have drive encryption enabled for my home folder. At least at rest the information on the disk is encrypted!</p> <h4 id=use-describe-endpoint>Use describe-endpoint<a class=headerlink href=#use-describe-endpoint title="Permanent link">&para;</a></h4> <p>Using the AWS CLI you can get the account-specific URL endpoint for your IoT. From the <a href=https://docs.aws.amazon.com/cli/latest/reference/iot/describe-endpoint.html>documentation for the AWS IoT <code>describe-endpoint</code> command</a>, we will use the endpoint that returns an ATS signed data endpoint. This works with the AWS root certificate we collected earlier. If you want to use a Verisign signed endpoint instead, you'll have to adjust the Root CA you use. In this tutorial we'll use ATS signed.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>$ aws iot describe-endpoint --endpoint-type &#39;iot:Data-ATS&#39;
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>{
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>    &quot;endpointAddress&quot;: &quot;a2**********3d-ats.iot.eu-west-2.amazonaws.com&quot;
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>}
</code></pre></div> <p>This URL is the endpoint we'll configure our Thing to connect to MQTT. According to the <a href=https://docs.aws.amazon.com/general/latest/gr/iot-core.html>documentation</a> port <code>8883</code> is used for secure MQTT connections on this URL.</p> <h2 id=connect-to-aws-iot-to-publish-mqtt>Connect to AWS IoT to Publish MQTT<a class=headerlink href=#connect-to-aws-iot-to-publish-mqtt title="Permanent link">&para;</a></h2> <p>Now we should have everything we need to connect to AWS IoT with our new thing and we should be able to subscribe to and publish messages to the same topic.</p> <p>As things in the Sketch get more complicated, we want to make sure we see output from any libraries we're using. Make sure to set the Core Debug Level setting to Warning or more verbosity so you can debug issues more easily:</p> <p><img alt src=/img/open-software/arduino/esp32-mqtt-tutorial/340-esp32-arduino-set-debug-logging-to-warning.png></p> <p><strong>140-esp32-arduino-mqtt-connect-to-aws-iot.ino</strong></p> <p><a href=https://github.com/valvers/valvers.website.src/tree/master/docs/src/esp32-mqtt-tutorial/140-esp32-arduino-mqtt-connect-to-aws-iot>140-esp32-arduino-mqtt-connect-to-aws-iot.ino</a> is a new sketch that includes the AWS configuration data that we've collected while setting up our AWS IoT service.</p> <p>In order to use the sketch, you'll need to fill in your AWS IoT ATS endpoint and the Thing Certificate and Private Key that you gathered earlier. If you've used all the same values as me you can leave the rest alone, otherwise you'll have to adjust the topic and/or device name.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>Setting AWS Root CA
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>Setting Thing Certificate
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>Setting the Thing Private Key
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>Beginning MQTT Client a2**********3d-ats.iot.eu-west-2.amazonaws.com:8883
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>checking wifi...connecting...
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>connected!
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>Subscribing to $aws/things/ESP32Example/shadow/update
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>Subscribing to $aws/things/ESP32Example/shadow/update/accepted
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>Subscribing to $aws/things/ESP32Example/shadow/update/rejected
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>Publishing State...
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>incoming: $aws/things/ESP32Example/shadow/update/accepted - {&quot;state&quot;:{&quot;reported&quot;:{&quot;color&quot;:&quot;red&quot;,&quot;power&quot;:&quot;on&quot;}},&quot;metadata&quot;:{&quot;reported&quot;:{&quot;color&quot;:{&quot;timestamp&quot;:1587417221},&quot;power&quot;:{&quot;timestamp&quot;:1587417221}}},&quot;version&quot;:159,&quot;timestamp&quot;:1587417221}
</code></pre></div> <p>The topics that are used in this example come from the <a href=https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-mqtt.html#update-pub-sub-topic>AWS IoT documentation</a> and are special reserved MQTT topics which allow IoT to keep a shadow copy of the Device's state. It is common to have this sort of shadowing for the device. If, for some reason the real device is not available, services will get the shadow device data instead.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2002-2020 Brian Sidebotham </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/squidfunk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://gitter.im/squidfunk/mkdocs-material target=_blank rel=noopener title=gitter.im class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M66.4 322.5H16V0h50.4v322.5zM166.9 76.1h-50.4V512h50.4V76.1zm100.6 0h-50.4V512h50.4V76.1zM368 76h-50.4v247H368V76z"/></svg> </a> <a href=https://hub.docker.com/r/squidfunk/mkdocs-material/ target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=https://pypi.org/project/mkdocs-material/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg> </a> <a href=https://twitter.com/squidfunk target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.4b2c34cd.min.js></script> <script src=../../../valvers-assets/extra.js></script> </body> </html>